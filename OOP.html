<html>
	<head>
		<meta charset="utf-8">
		<title>OOP</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		<style>
			
			body{
				margin: 40px;
			}
			input{
				outline: none;

			}
			/**/
			.popup{
				opacity: 0;
				position: absolute;
				padding: 10px;
				border: 1px solid black;
				background: white;
				box-shadow: 0 0 10px black;
				transition: opacity 0.5s ease;
			}
			.popup.active{
				opacity: 1;
			}
			/*slider*/
			.slider{
				position: relative;
				padding: 0 50px;
			}
			.slider-content{
				position: relative;
				overflow: hidden;
			}
			.slider-item{
				position: absolute;
				border: 1px solid black;
				width: 100%;
				height: 100%;
				box-sizing: border-box;
				background: gray;
			}
			.slider-button{
				position: absolute;
				top: 50%;
				transform: translateY(-50%);
				background: white;
				border: 1px solid green;
				border-radius: 50px;
				text-align: center;
				line-height: 20px;
				cursor: pointer;
				outline: none;
			}
			.slider-button-prev{
				left: 0;
			}
			.slider-button-next{
				right: 0;
			}
			.slider-button.disabled{
				background: gray;
				border: gray;
				opacity: 0.5;
			}
			.slider-content{
				height: 300px;
			}
			.slider-item{
				width: 100%;
				overflow: hidden;
			}
			
		</style>
	</head>
	<body>
		<div>My div
			<!-- <div class="popup">....</div> -->
		</div>
		<h2>Header</h2>
		<button>Click me</button>
		<hr>
		
		<div class="slider" id="slider1">
			<div class="slider-content">
				<div class="slider-item"><img src="img/pic1.jpg"></div>
				<div class="slider-item"><img src="img/pic2.jpg"></div>
				<div class="slider-item"><img src="img/pic3.jpg"></div>
				<!-- <div class="slider-content"><img src="img/pic4.png"></div> -->
			</div>
			<button class="slider-button slider-button-prev" data-action="left">prev</button>
			<button class="slider-button slider-button-next" data-action="right">next</button>

		</div>
		<hr><br>
	</body>

	<script>
	// -----------------------------------------------------------------
		//---only example - don't work---
		function Student(n, a) {
			var name = n;
			var age = a;
			var sayHello = function() {
				alert('Hello from' + name);
			}
		}


		var s = new Student('Alex', 25);
		// s.sayHello() //не спрацює - бо приватні змінні. зона видимості. ТОМУ:
		//-----------------------------------
		function Student1(n, a) {
			this.name = n;
			// var age = a; //private
			this.age = a; 
			var CONST = 80; //private

			this.sayHello = function() {
				console.log('Hello from ' + this.name);
			}

			this.getAge = function() {
				// console.log('Age ' + this.name + ' is ' + age);
				console.log('Age ' + this.name + ' is ' + this.age);
			}
			//---------------
			this.getAgeDiff = function() {
				console.log('Різниця e віці: ' + calc());//NaN
					console.log(calc());//return CONST - this.age; => NaN;
									//return this; => window !!!
					console.log(this); // Student1 - what we need
			}
			var self = this; // We convey the context of execution from the outside
			var calc = function() { //privat
				// return this;    //Here 'this' is 'window' - global context
				// return CONST - this.age;
				return CONST - self.age;
			}
		}

		var s1 = new Student1('Alex', 25);
		var s3 = new Student1('Masha', 25);

		s1.sayHello();
		s1.getAge();

		s1['getAge']();

		s3.name = 'Lenka';
		s3.sayHello();       //Hello from Lenka
		//---------------------------------------
		s1.getAgeDiff();
		console.log('Global context: ' + this ); //window
	//-----------------------------------------------------------------
	//-----------------------------------------------------------------
	function HtmlElement(tag, content, bg) {
		var el = document.createElement(tag);

		this.show = function(){
			el.innerHTML = content;
			el.style.background = bg;
			document.body.appendChild(el);
		}
		this.remove = function() {
			document.body.removeChild(el);
		}
	}

	var el = new HtmlElement('div', '<p>content</p>', 'red');
	var el2 = new HtmlElement('h1', 'content2', 'pink');
	var el3 = new HtmlElement('p', 'content3', 'green');
	el.show();
	el2.show();
	el3.show();
	el3.remove();
	//-----------------------------------------------------------------
	//---------The same with functions----------------------------------
	function createEl(tag, content, bg){
		var el = document.createElement(tag);
		el.innerHTML = content;
		el.style.background = bg;
		document.body.appendChild(el);
		return el;
	}

	function del(el) {
		document.body.removeChild(el);
	}

	var el4 = createEl('div', '<p>content</p>', 'gray');
	var el5 = createEl('div', '<p>content</p>', 'black');
	del(el5);
    // -----------------------------------------------------------------
    // -----------informers---------------------------------------------
    // function Popup(node, content, position){
    function Popup(options){
    	var tip = document.createElement('div');
    	tip.classList.add('popup');
    	tip.innerHTML = options.content;
    	options.node.appendChild(tip);
    	options.node.style.position = 'relative';
    	addPosition(options.position);

    	this.toggle = function() {
    		tip.classList.toggle('active');
    	}

    	options.node.addEventListener('click', this.toggle); //Must be after 
    								// this.toggle = ... Function Expression !!!

    	function addPosition(position){
    		switch(position) {
    			case 'bottom':
    				tip.style.bottom = '-100%';
    				tip.style.left =  0;
    				break;
    		}
    	}
    }

    var el6 = new Popup({
    	node: document.getElementsByTagName('div')[0],
    	content: 'This is a tip',
    	position: 'bottom'
    })
    // ------------------------------
    // ---it was good but it's better (with init):
    	function Popup1(options){
	    	var tip = document.createElement('div');
	    	
	    	this.init = function() {
	    		tip.classList.add('popup');
		    	tip.innerHTML = options.content;
		    	options.node.appendChild(tip);
		    	options.node.style.position = 'relative';
		    	addPosition(options.position);
		    	options.node.addEventListener('click', this.toggle); 
	    	}

	    	this.toggle = function() {
	    		tip.classList.toggle('active');
	    	}


	    	function addPosition(position){
	    		switch(position) {
	    			case 'bottom':
	    				tip.style.bottom = '-100%';
	    				tip.style.left =  0;
	    				break;
	    		}
	    	}
	    	this.init();
	    }

	    var el7 = new Popup1({
    	node: document.getElementsByTagName('h2')[0],
    	content: 'This is a tip2',
    	position: 'bottom'
    })
// -------------------------------------------------------
// -------------------------------------------------------
// --------------Slider-----------------------------------
function Slider(settings) {
		var slider = document.getElementById(settings.sliderId);
		var sliderContent = slider.getElementsByClassName('slider-content')[0];
		var sliderItems = slider.getElementsByClassName('slider-item');
		var sliderWidth = parseFloat(getComputedStyle(sliderContent).width);
		var singleSlideWidth = 0;
		var sliderButtons = slider.getElementsByClassName('slider-button');
		var self = this;

		var showSlides = function(a){
			for (var i = 0; i < sliderItems.length; i++) {
				if (sliderItems[i].style.left !== '') {
					var current = parseFloat(sliderItems[i].style.left);
					sliderItems[i].style.left = (current + (singleSlideWidth * a)) + 'px';
				} else {
					sliderItems[i].style.width = singleSlideWidth + 'px';
					sliderItems[i].style.left = (singleSlideWidth * i) + 'px';
				}
			}
		}

		this.move_left = function() {
			// for (var i = 0; i < sliderItems.length; i++) {
			// 	var current = parseFloat(sliderItems[i].style.left);
			// 	sliderItems[i].style.left = (current - singleSlideWidth) + 'px';
			// }
			if (parseFloat(sliderItems[sliderItems.length - 1].style.left) >=  sliderWidth) {
				showSlides(-1);
			} 
			
		}
		this.move_right = function() {
			// for (var i = 0; i < sliderItems.length; i++) {
			// 	var current = parseFloat(sliderItems[i].style.left);
			// 	sliderItems[i].style.left = (current + singleSlideWidth) + 'px';
			// }
			if (parseFloat(sliderItems[0].style.left) <  0) {
				showSlides(1);
			} 

		}

		var init = function(){   
			//тут будем робити усю нормалізацію
			if (!settings.slidesToShow && isNaN(+settings.slidesToShow)) {
				//1-що щось передано(не 0, не "", не undefined) 2- що числo а не "уааі" якась фігнф
				settings.slidesToShow = 1; 
			}
			singleSlideWidth = sliderWidth / settings.slidesToShow;
			console.log(singleSlideWidth);

			// for (var i = 0; i < sliderItems.length; i++) {
			// 	sliderItems[i].style.width = singleSlideWidth + 'px';
			// 	sliderItems[i].style.left = (singleSlideWidth * i) + 'px';
			// }
			showSlides(1);

			for (var i = 0; i < sliderButtons.length; i++) {
				sliderButtons[i].addEventListener('click', function(){
					self['move_' + this.dataset.action]();
					// self['move_left'](); == self.move_left();
					//В середині функції обробчика this це те по чому клікнули. 
					//self звертається до нашого обєкта
				});
			}

			// sliderButtons[0].addEventListener('click', self.move_left); //this в середині функції init буде обєкт віндов
			// sliderButtons[1].addEventListener('click', self.move_right); 
		}
		init();
	}

		// new Slider({...    Так тоже буде працювати
		var s1 = new Slider({
			sliderId: 'slider1',
			slidesToShow: 1,
			infinite: false
		});


//--------------------------------------------------------------------
//----------Getter and Setter-----------------------------------------

	function Rabbit(name) {
	 	var totalDist = 0;
	 	var timer;
	 	this.name = name;
	 	var uniqCharacter ="white";

	 	this.run = function() {
	 		timer = setInterval(function(){
	 			console.log(totalDist++);
	 		}, 1000);
	 	}

	 	this.stop = function(){
	 		clearTimeout(timer);
	 	}
	 	//геттери і сеттери відповідають за то які дані збираються бути загружені чи получені. (Зробив this.totalDist -публічним - хтось може змінити, тому вона у нас локальнаю Прочитати можемо, а переписати ні)
	 	this.get = function(propertyName) {
	 		 if(propertyName == 'timer') { // імітує відсутність  
	 		 	return undefined;
	 		 }
	 		 // return this['propertyName']; //тільки до публічних  
	 		 if (this[propertyName] !== undefined) { // чи незапитуюють публічне свойство ??? 
	 		 	return this[propertyName]; 
	 		 } else {
	 		 	return this['get_' + propertyName]();
	 		 }
	 	} 

	 	this.get_totalDist =function() {
	 		return totalDist;
	 	} 

	 	this.set_totalDist = function(value) {
	 		value = +value;
	 		if (!isNaN(value)) {
	 			totalDist = value;
	 		} else {
	 			alert('error');
	 		}
	 	} 

	 	this.getterSetterTotalDist = function(value) { //Так в jQuery - дивимося чи було щось передано
	 		if (value === undefined) {
	 			return totalDist;
	 		} else {
	 			value = +value; 
	 			if (!isNaN(value)) {
	 				totalDist = value;
	 			} else {
	 				alert('error');
	 			}
	 		}
	 	}

	 }


	 var rabbit = new Rabbit('Bax');  
	 // rabbit.run();
	 // rabbit.stop();
	 // rabbit.get('totalDist')
	 // rabbit.get('name')

	 // rabbit.getterSetterTotalDist()
	 // rabbit.getterSetterTotalDist(40)

	function MyHtml(id) {
	 	var el = document.getElementById(id);

	 	this.width = function(value) {
	 		if (value === undefined) { //якщо не передали параметр
	 			return getComputed(el).width; //вертаємо розмір наявний
	 		} else {
	 			value = parseFloat(value);
	 			if (!isNaN(value)) {
	 				el.style.width = value + 'px';
	 			}
	 		}
	 	}
	 }


	 var a = new MyHtml('one');
	 a.width('250px');
	 
	</script>
</html>